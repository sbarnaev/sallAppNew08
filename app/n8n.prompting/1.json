https://api.openai.com/v1/responses

{
    "model": "gpt-5-mini",
    "reasoning": { "effort": "medium" },
  
    "input": [
      {
        "role": "system",
        "content": "Ты — эксперт по системному анализу личности (САЛ), который помогает консультанту провести консультацию для клиента. Твоя задача — создать понятный, ясный, бытовой текст, который консультант сможет легко использовать в работе с клиентом.\n\nСАЛ — это метод, который определяет ключевые аспекты личности через пять кодов по дате рождения:\n1) Код Личности — ядро человека, его врожденная природа, способ мышления, характер.\n2) Код Коннектора — как человек взаимодействует с миром, как его воспринимают окружающие.\n3) Код Реализации — через что человек реализует себя, получает чувство пользы и результата.\n4) Код Генератора — что заряжает и истощает человека, что даёт смысл.\n5) Код Миссии — какую энергию человек призван нести в мир, испытания и искажения.\n\nВАЖНО: Пиши простым, понятным языком, как будто объясняешь другу. Избегай сложных терминов, используй бытовые примеры и ситуации из жизни.\n\nЖЁСТКИЕ ПРАВИЛА ПО СТРУКТУРЕ:\n- strengths (сильные стороны) — ровно 7 пунктов. Это то, что у человека хорошо получается, его таланты и способности. Указывай ресурс с цифрой, например: \"Лидерские качества — Личность (1)\".\n- weaknesses (слабые стороны) — ровно 7 пунктов. Это риски, сложности, то, что может мешать. НЕ ПУТАТЬ с resourceSignals! Указывай ресурс с цифрой, например: \"Импульсивность и рассеянность — Личность (3): риск недоведения дел до конца\".\n- resourceSignals (признаки плюса) — ровно 10 пунктов. Это конкретные признаки, что ресурс работает хорошо, например: \"Вы легко начинаете разговоры и люди тянутся — признак активной Личности (3)\".\n- deficitSignals (признаки минуса) — ровно 10 пунктов. Это конкретные признаки, что ресурс в дефиците, например: \"Трудно начать разговор, чувствуете себя неловко — признак дефицита Личности (3)\".\n\nВо всех описательных местах явно указывай ресурс и его цифру в скобках, например: \"Коннектор (2)\".\n\nВ opener напиши вводную фразу, которую консультант прочитает клиенту для установления доверия. Используй интересный факт из профиля, особенность или конфликт, чтобы человек узнал себя с первых слов."
      },
      {
        "role": "user",
        "content": "Входные данные профиля САЛ клиента {{ $('Webhook').first().json.body.name }} {{ $('Webhook').first().json.body.birthday.split('-').reverse().join('.') }} в поле codes:"
      },
      {
        "role": "user",
        "content": "Входные данные профиля САЛ в поле codes: Личность: {{ $json.codes[0].description }}, Коннектор: {{ $json.codes[1].description }}, Реализация: {{ $json.codes[2].description }}, Генератор: {{ $json.codes[3].description }}, Миссия: {{ $json.codes[4].description }}"
      }
    ],
  
    "text": {
      "format": {
        "type": "json_schema",
        "name": "sal_consult_prep",
        "strict": true,
        "schema": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "opener": { 
            "type": "string"
              },
            "personalitySummary": {
              "type": "array",
              "description": "Ровно 3 абзаца описания личности простым, понятным языком. В тексте указываются ресурсы с цифрами. Используй бытовые примеры и ситуации из жизни.",
              "minItems": 3,
              "maxItems": 3,
              "items": { "type": "string" }
            },
  
            "strengths": { 
              "type": "array", 
              "minItems": 7, 
              "maxItems": 7, 
              "description": "Ровно 7 сильных сторон клиента — его таланты и способности. Указывай ресурс с цифрой, например: 'Лидерские качества — Личность (1)'. НЕ ПУТАТЬ с resourceSignals!",
              "items": { "type": "string" } 
            },
            "weaknesses": { 
              "type": "array", 
              "minItems": 7, 
              "maxItems": 7, 
              "description": "Ровно 7 слабых сторон клиента — риски, сложности, то, что может мешать. Указывай ресурс с цифрой, например: 'Импульсивность и рассеянность — Личность (3): риск недоведения дел до конца'. НЕ ПУТАТЬ с deficitSignals!",
              "items": { "type": "string" } 
            },
  
            "happinessFormula": {
              "type": "array",
              "description": "2–3 абзаца формулы счастья простым, понятным языком. Первые два абзаца — объяснение, последний (если есть) — примеры/сцены из жизни. Указывать ресурсы и цифры.",
              "minItems": 2,
              "maxItems": 3,
              "items": { "type": "string" }
            },
  
            "resourceSignals": { 
              "type": "array", 
              "minItems": 10, 
              "maxItems": 10, 
              "description": "Ровно 10 признаков плюса — конкретные признаки, что ресурс работает хорошо. Например: 'Вы легко начинаете разговоры и люди тянутся — признак активной Личности (3)'. НЕ ПУТАТЬ с strengths!",
              "items": { "type": "string" } 
            },
            "deficitSignals": { 
              "type": "array", 
              "minItems": 10, 
              "maxItems": 10, 
              "description": "Ровно 10 признаков минуса — конкретные признаки, что ресурс в дефиците. Например: 'Трудно начать разговор, чувствуете себя неловко — признак дефицита Личности (3)'. НЕ ПУТАТЬ с weaknesses!",
              "items": { "type": "string" } 
            },
  
            "codesExplanation": {
              "type": "array",
              "description": "3–5 абзацев пояснения кодов простым, понятным языком. Объясни, из каких ресурсов состоит человек, как они сочетаются или конфликтуют, с бытовыми примерами. Указывать ресурсы и цифры.",
              "minItems": 3,
              "maxItems": 5,
              "items": { "type": "string" }
            },
  
            "conflicts": {
              "type": "array",
              "minItems": 5,
              "maxItems": 5,
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "title": { "type": "string" },
                  "description": { "type": "string" },
                  "manifestations": { "type": "array", "items": { "type": "string" } },
                  "advice": { "type": "string" }
                },
                "required": ["title", "description", "manifestations", "advice"]
              }
            },
  
            "practices": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "personality": { "$ref": "#/$defs/practiceTriplet" },
                "connector":   { "$ref": "#/$defs/practiceTriplet" },
                "realization": { "$ref": "#/$defs/practiceTriplet" },
                "generator":   { "$ref": "#/$defs/practiceTriplet" },
                "mission":     { "$ref": "#/$defs/practiceTriplet" }
              },
              "required": ["personality", "connector", "realization", "generator", "mission"]
            }
          },
          "required": [
            "opener",
            "personalitySummary",
            "strengths",
            "weaknesses",
            "happinessFormula",
            "resourceSignals",
            "deficitSignals",
            "codesExplanation",
            "conflicts",
            "practices"
          ],
          "$defs": {
            "practiceTriplet": {
              "type": "array",
              "minItems": 3,
              "maxItems": 3,
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "title": { "type": "string" },
                  "p1": { "type": "string" },
                  "p2": { "type": "string" }
                },
                "required": ["title", "p1", "p2"]
              }
            }
          }
        }
      }
    }
  }
  